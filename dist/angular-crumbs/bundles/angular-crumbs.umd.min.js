!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/router")):"function"==typeof define&&define.amd?define("angular-crumbs",["exports","@angular/core","@angular/common","@angular/router"],t):t((e=e||self)["angular-crumbs"]={},e.ng.core,e.ng.common,e.ng.router)}(this,(function(e,t,r,n){"use strict";var o=function(){},i=function(){function e(e){var r=this;this.router=e,this.breadcrumbChanged=new t.EventEmitter(!1),this.breadcrumbs=new Array,this.router.events.subscribe((function(e){r.onRouteEvent(e)}))}return e.prototype.changeBreadcrumb=function(e,t){var r=this.createRootUrl(e),n=this.breadcrumbs.find((function(e){return e.url===r}));n&&(n.displayName=t,this.breadcrumbChanged.emit(this.breadcrumbs))},e.prototype.onRouteEvent=function(e){if(e instanceof n.NavigationEnd){for(var t=this.router.routerState.root.snapshot,r="",o=0,i=[];null!=t.firstChild;)if(null!==(t=t.firstChild).routeConfig&&t.routeConfig.path&&(r+="/"+this.createUrl(t),t.data.breadcrumb)){var a=this.createBreadcrumb(t,r);if(o<this.breadcrumbs.length){var u=this.breadcrumbs[o++];u&&u.route==t.routeConfig&&(a.displayName=u.displayName)}i.push(a)}this.breadcrumbs=i,this.breadcrumbChanged.emit(this.breadcrumbs)}},e.prototype.createBreadcrumb=function(e,t){return{displayName:e.data.breadcrumb,terminal:this.isTerminal(e),url:t,route:e.routeConfig}},e.prototype.isTerminal=function(e){return null===e.firstChild||null===e.firstChild.routeConfig||!e.firstChild.routeConfig.path},e.prototype.createUrl=function(e){return e.url.map((function(e){return e.toString()})).join("/")},e.prototype.createRootUrl=function(e){for(var t="",r=e.root;null!==r.firstChild&&(null===(r=r.firstChild).routeConfig||!r.routeConfig.path||(t+="/"+this.createUrl(r),r!==e)););return t},e.ɵfac=function(r){return new(r||e)(t.ɵɵinject(n.Router))},e.ɵprov=t.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}(),a=function(e){return[e]};function u(e,r){if(1&e&&(t.ɵɵelementStart(0,"a",8),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext().$implicit;t.ɵɵproperty("routerLink",t.ɵɵpureFunction1(2,a,n.url)),t.ɵɵadvance(1),t.ɵɵtextInterpolate(n.displayName)}}function c(e,r){if(1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext().$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(n.displayName)}}var d=function(e){return{last:e}};function l(e,r){if(1&e&&(t.ɵɵelementStart(0,"div",5),t.ɵɵtemplate(1,u,2,4,"a",6),t.ɵɵtemplate(2,c,2,1,"span",7),t.ɵɵelementEnd()),2&e){var n=r.$implicit;t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(3,d,n.terminal)),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.terminal),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.terminal)}}function s(e,r){if(1&e&&(t.ɵɵelementStart(0,"div",2),t.ɵɵelementStart(1,"div",3),t.ɵɵtemplate(2,l,3,5,"div",4),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",n.breadcrumbs)}}var f=["*"],m=function(){function e(e){var t=this;this.breadcrumbService=e,e.breadcrumbChanged.subscribe((function(e){t.onBreadcrumbChange(e)}))}return e.prototype.onBreadcrumbChange=function(e){this.breadcrumbs=e},e.ɵfac=function(r){return new(r||e)(t.ɵɵdirectiveInject(i))},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["breadcrumb"]],ngContentSelectors:f,decls:4,vars:1,consts:[["template",""],["class","container",4,"ngIf"],[1,"container"],[1,"nav-wrapper"],["class","breadcrumb",3,"ngClass",4,"ngFor","ngForOf"],[1,"breadcrumb",3,"ngClass"],["href","",3,"routerLink",4,"ngIf"],[4,"ngIf"],["href","",3,"routerLink"]],template:function(e,r){if(1&e&&(t.ɵɵprojectionDef(),t.ɵɵelementStart(0,"div",null,0),t.ɵɵprojection(2),t.ɵɵelementEnd(),t.ɵɵtemplate(3,s,3,1,"div",1)),2&e){var n=t.ɵɵreference(1);t.ɵɵadvance(3),t.ɵɵproperty("ngIf",0==n.children.length)}},directives:[r.NgIf,r.NgForOf,r.NgClass,n.RouterLinkWithHref],encapsulation:2}),e}();function p(e){return new i(e)}var b=function(){function e(){}return e.ɵmod=t.ɵɵdefineNgModule({type:e}),e.ɵinj=t.ɵɵdefineInjector({factory:function(t){return new(t||e)},providers:[{provide:i,useFactory:p,deps:[n.Router]}],imports:[[r.CommonModule,n.RouterModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(b,{declarations:[m],imports:[r.CommonModule,n.RouterModule],exports:[m]}),e.Breadcrumb=o,e.BreadcrumbComponent=m,e.BreadcrumbModule=b,e.BreadcrumbService=i,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-crumbs.umd.min.js.map